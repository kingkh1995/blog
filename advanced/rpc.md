# [首页](/blog/)

> **RPC**

***

## Dubbo

1.负载均衡
2.服务链路生成
3.服务统计，资源调度治理
4.服务降级
使用jacassist动态生成字节码文件
各种调用方式
dubbo:单一长连接和NIO，适用于高并发小数据，消费者远大于提供者。传输协议，基于TCP，hessian序列化，占用带宽少。
spring cloud:eruka,feign，基于http协议。
注册中心挂了，可以访问，因为直接将提供者的地址保存到本地缓存了。
服务失效踢出，使用zookeepr临时节点实现，
dubbo负载均衡策略
1.轮询
2.随机
3.活跃度判断
4.一致性哈希算法
容错策略
1.重试模式，分配给其他提供者，默认两次，否则算失败。
2.快速失败模式，调用失败则抛出异常，常见的模式。
3.安全失败，出错则打印异常，不抛出异常，适用于日志打印等
4.并行调用模式，调用多个提供者，一个返回结果即成功。要考虑幂等情况。
5.广播模式，调用所有提供者，一个报错则报错，用于提示更新缓存或配置等。
6.fallback模式，如果失败，先返回一个空结果，然后不停重试，适用于消息通知等。
dubbo服务暴露
1.spring 容器刷新完成后，组成URL对象，包含配置信息
2.proxyFactory.getInvoker()方法，使用javassist字节码技术，生成invoker对象
3.将invoker封装为export对象，封装到exportedMap中，供远程调用查找
4.将提供者信息注册到zookeeper
5.对configurations节点订阅。
服务引用
默认懒汉式，只有注入到类中并启动引入流程，才会组装URL对象，然后注册到注册中心，订阅节点，路由，配置信息。用CLuster.join包装invoker，返回包含nettyCLient的动态代理类。

***

## Feign

***